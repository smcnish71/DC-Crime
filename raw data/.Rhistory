count(dataset, "WARD")
dataset$year <- dataset$REPORT_DAT$year+1900  # years since 1900
count(dataset, "year")
dataset$day <- dataset$REPORT_DAT$mday        # day of month
dataset$month <- dataset$REPORT_DAT$mon+1     # month of year (zero-indexed)
ggplot(data=dataset, aes(x=yea, fill=OFFENSE)) +
geom_bar(stat="count", position=position_dodge())
ggplot(data=dataset, aes(x=year, fill=OFFENSE)) +
geom_bar(stat="count", position=position_dodge())
dataset$year <- as.factor(dataset$REPORT_DAT$year+1900)  # years since 1900
ggplot(data=dataset, aes(x=year, fill=OFFENSE)) +
geom_bar(stat="count", position=position_dodge())
ggplot(data=dataset, aes(x=year, fill=WARD)) +
geom_bar(stat="count", position=position_dodge())
ggplot(data=dataset, aes(x=year, fill=METHOD)) +
geom_bar(stat="count", position=position_dodge())
#filter out 2017
dataset[dataset$year != '2017',]
#filter out 2017
dataset<-dataset[dataset$year != '2017',]
ggplot(data=dataset, aes(x=year, fill=METHOD)) +
geom_bar(stat="count", position=position_dodge())
ggplot(data=dataset, aes(x=year, fill=OFFENSE)) +
geom_bar(stat="count", position=position_dodge())
dataset$month <- as.factor(dataset$REPORT_DAT$mon+1)
ggplot(data=dataset, aes(x=month, group=year)) +
geom_line() +
geom_point()
ggplot(data=dataset, aes(x=month, y=count, group=year)) +
geom_line() +
geom_point()
ggplot(data=dataset, aes(x=month, group=year)) +
geom_line(aes(fill=..count..)mstat="bin" +
geom_point()
ggplot(data=dataset, aes(x=month, group=year)) +
geom_line(aes(fill=..count..)mstat="bin"
ggplot(data=dataset, aes(x=month, group=year)) +
geom_line(aes(fill=..count..),stat="bin"
)
ggplot(data=dataset, aes(x=month, group=year)) +
geom_line(aes(fill=..count..),stat="count" )
ggplot(data=dataset, aes(x=month, group=year, color=year)) +
geom_line(aes(fill=..count..),stat="count" )
ggplot(data=dataset, aes(x=year, fill=OFFENSE)) +
geom_bar(stat="count", position=position_dodge())
ggplot(data=dataset, aes(x=REPORT_DAT)) +
geom_line(aes(fill=..count..),stat="count" )
ggplot(data=dataset, aes(x=year)) +
geom_line(aes(fill=..count..),stat="count" )
ggplot(data=dataset, aes(x=year, fill=WARD)) +
geom_bar(stat="count", position=position_dodge())
dataset$WARD <- as.factor(dataset$WARD)
ggplot(data=dataset, aes(x=year, fill=WARD)) +
geom_bar(stat="count", position=position_dodge())
count(dataset, "WARD"~"OFFENSE")
count(dataset,"OFFENSE")
qplot(dataset$XBLOCK,dataset$YBLOCK, color=dataset$WARD)
etwd("C:/Users/smcnish/Documents/Vizs/Crime/DC-Crime/raw data/")
library(ggplot2)
library(dplyr)
library(plyr)
#append all 8 files together
file_list <- list.files()
for (file in file_list){
# if the merged dataset doesn't exist, create it
if (!exists("dataset")){
dataset <- read.csv(file, header=TRUE)
}
# if the merged dataset does exist, append to it
if (exists("dataset")){
temp_dataset <-read.csv(file, header=TRUE)
dataset<-rbind(dataset, temp_dataset)
rm(temp_dataset)
}
}
#clean up variables
dataset$REPORT_DAT<- as.POSIXlt(dataset$REPORT_DAT, format = "%m/%d/%Y %I:%M:%S %p")
dataset$day <- dataset$REPORT_DAT$mday        # day of month
dataset$month <- as.factor(dataset$REPORT_DAT$mon+1)     # month of year (zero-indexed)
dataset$year <- as.factor(dataset$REPORT_DAT$year+1900)  # years since 1900
dataset$START_DATE<- as.POSIXlt(dataset$START_DATE, format = "%m/%d/%Y %I:%M:%S %p")
dataset$END_DATE<- as.POSIXlt(dataset$END_DATE, format = "%m/%d/%Y %I:%M:%S %p")
dataset$WARD <- as.factor(dataset$WARD)
#filter out 2017
dataset<-dataset[dataset$year != '2017',]
qplot(dataset$XBLOCK,dataset$YBLOCK, color=dataset$WARD)
count(dataset, "WARD")
ggplot(data=dataset, aes(x=year, fill=WARD)) +
geom_bar(stat="count", position=position_dodge())
ggplot(data=dataset, aes(x=month, group=year, color=year)) +
geom_line(aes(fill=..count..),stat="count" )
count(dataset, "OFFENSE")
dataset %>% head(10)
df_daily <- dataset %>%
group_by(REPORT_DAT) %>%
summarize(count = n()) %>%
arrange(EPORT_DAT)
df_daily %>% head(10)
dataset$REPORT_DAT<- as.Date(dataset$REPORT_DAT, format = "%m/%d/%Y %I:%M:%S %p")
df_daily <- dataset %>%
group_by(REPORT_DAT) %>%
summarize(count = n()) %>%
arrange(EPORT_DAT)
df_daily %>% head(10)
}
#clean up variables
dataset$REPORT_DAT<- as.Date(dataset$REPORT_DAT, format = "%m/%d/%Y %I:%M:%S %p")
dataset$day <- dataset$REPORT_DAT$mday        # day of month
dataset$month <- as.factor(dataset$REPORT_DAT$mon+1)     # month of year (zero-indexed)
dataset$year <- as.factor(dataset$REPORT_DAT$year+1900)  # years since 1900
dataset$START_DATE<- as.POSIXlt(dataset$START_DATE, format = "%m/%d/%Y %I:%M:%S %p")
dataset$END_DATE<- as.Date(dataset$END_DATE, format = "%m/%d/%Y %I:%M:%S %p")
dataset$WARD <- as.Date(dataset$WARD)
dataset$REPORT_DAT<- as.Date(dataset[,REPORT_DAT], format = "%m/%d/%Y %I:%M:%S %p")
#clean up variables
dataset[,REPORT_DAT]<- as.Date(dataset[,REPORT_DAT], format = "%m/%d/%Y %I:%M:%S %p")
#clean up variables
dataset$REPORT_DAT<- as.POSIXlt(dataset$REPORT_DAT, format = "%m/%d/%Y %I:%M:%S %p")
dataset$day <- dataset$REPORT_DAT$mday        # day of month
dataset$month <- as.factor(dataset$REPORT_DAT$mon+1)     # month of year (zero-indexed)
dataset$year <- as.factor(dataset$REPORT_DAT$year+1900)  # years since 1900
dataset$START_DATE<- as.POSIXlt(dataset$START_DATE, format = "%m/%d/%Y %I:%M:%S %p")
dataset$END_DATE<- as.POSIXlt(dataset$END_DATE, format = "%m/%d/%Y %I:%M:%S %p")
dataset$WARD <- as.POSIXlt(dataset$WARD)
df_daily <- dataset %>%
group_by(REPORT_DAT) %>%
summarize(count = n()) %>%
arrange(REPORT_DAT)
df_daily <- dataset %>%
group_by(REPORT_DAT) %>%
summarize(count = n()) %>%
arrange(REPORT_DAT)
library(ggplot2)
library(dplyr)
library(plyr)
#append all 8 files together
file_list <- list.files()
for (file in file_list){
# if the merged dataset doesn't exist, create it
if (!exists("dataset")){
dataset <- read.csv(file, header=TRUE)
}
# if the merged dataset does exist, append to it
if (exists("dataset")){
temp_dataset <-read.csv(file, header=TRUE)
dataset<-rbind(dataset, temp_dataset)
rm(temp_dataset)
}
}
#clean up variables
dataset$REPORT_DAT<- as.POSIXlt(dataset$REPORT_DAT, format = "%m/%d/%Y %I:%M:%S %p")
dataset$day <- dataset$REPORT_DAT$mday        # day of month
dataset$month <- as.factor(dataset$REPORT_DAT$mon+1)     # month of year (zero-indexed)
dataset$year <- as.factor(dataset$REPORT_DAT$year+1900)  # years since 1900
dataset$START_DATE<- as.POSIXlt(dataset$START_DATE, format = "%m/%d/%Y %I:%M:%S %p")
dataset$END_DATE<- as.POSIXlt(dataset$END_DATE, format = "%m/%d/%Y %I:%M:%S %p")
#filter out 2017
dataset<-dataset[dataset$year != '2017',]
qplot(dataset$XBLOCK,dataset$YBLOCK, color=dataset$WARD)
count(dataset, "OFFENSE")
#ggplot(data=dataset, aes(x=year, fill=WARD)) +
#  geom_bar(stat="count", position=position_dodge())
#ggplot(data=dataset, aes(x=month, group=year, color=year)) +#
#  geom_line(aes(fill=..count..),stat="count" )
df_daily <- dataset %>%
group_by(REPORT_DAT) %>%
summarize(count = n()) %>%
arrange(REPORT_DAT)
#clean up variables
dataset$REPORT_DAT<- as.Date(dataset$REPORT_DAT, format = "%m/%d/%Y %I:%M:%S %p")
df_daily <- dataset %>%
group_by(REPORT_DAT) %>%
summarize(count = n()) %>%
arrange(REPORT_DAT)
df_daily %>% head(10)
#clean up variables
dataset$REPORT_DAT<- as.Date(dataset$REPORT_DAT, format = "%m/%d/%Y %I:%M:%S %p")
dataset$day <- dataset$REPORT_DAT$mday        # day of month
dataset$month <- as.factor(dataset$REPORT_DAT$mon+1)     # month of year (zero-indexed)
dataset$year <- as.factor(dataset$REPORT_DAT$year+1900)  # years since 1900
dataset$START_DATE<- as.Date(dataset$START_DATE, format = "%m/%d/%Y %I:%M:%S %p")
dataset$END_DATE<- as.Date(dataset$END_DATE, format = "%m/%d/%Y %I:%M:%S %p")
df_daily <- dataset %>%
group_by(REPORT_DAT) %>%
summarize(count = n()) %>%
arrange(REPORT_DAT)
df_daily %>% head(10)
df_daily <- dataset %>%
group_by(REPORT_DAT) %>%
summarize(count = n()) %>%
arrange(REPORT_DAT)
library(ggplot2)
library(plyr)
library(dplyr)
df_daily <- dataset %>%
group_by(REPORT_DAT) %>%
summarize(count = n()) %>%
arrange(REPORT_DAT)
df_daily %>% head(10)
library(ggplot2)
library(plyr)
library(dplyr)
setwd("C:/Users/smcnish/Documents/Vizs/Crime/DC-Crime/raw data/")
library(ggplot2)
library(plyr)
library(dplyr)
#append all 8 files together
file_list <- list.files()
for (file in file_list){
# if the merged dataset doesn't exist, create it
if (!exists("dataset")){
dataset <- read.csv(file, header=TRUE)
}
# if the merged dataset does exist, append to it
if (exists("dataset")){
temp_dataset <-read.csv(file, header=TRUE)
dataset<-rbind(dataset, temp_dataset)
rm(temp_dataset)
}
}
#clean up variables
dataset$REPORT_DAT<- as.Date(dataset$REPORT_DAT, format = "%m/%d/%Y %I:%M:%S %p")
dataset$day <- dataset$REPORT_DAT$mday        # day of month
dataset$month <- as.factor(dataset$REPORT_DAT$mon+1)     # month of year (zero-indexed)
dataset$year <- as.factor(dataset$REPORT_DAT$year+1900)  # years since 1900
dataset$START_DATE<- as.Date(dataset$START_DATE, format = "%m/%d/%Y %I:%M:%S %p")
dataset$END_DATE<- as.Date(dataset$END_DATE, format = "%m/%d/%Y %I:%M:%S %p")
#filter out 2017
dataset<-dataset[dataset$year != '2017',]
qplot(dataset$XBLOCK,dataset$YBLOCK, color=dataset$WARD)
count(dataset, "OFFENSE")
#ggplot(data=dataset, aes(x=year, fill=WARD)) +
#  geom_bar(stat="count", position=position_dodge())
#ggplot(data=dataset, aes(x=month, group=year, color=year)) +#
#  geom_line(aes(fill=..count..),stat="count" )
df_daily <- dataset %>%
group_by(REPORT_DAT) %>%
summarize(count = n()) %>%
arrange(REPORT_DAT)
df_daily %>% head(10)
plot <- ggplot(df_daily, aes(x = REPORT_DAT, y = count)) +
geom_line(color = "#F2CA27", size = 0.1) +
geom_smooth(color = "#1A1A1A") +
fte_theme() +
scale_x_date(breaks = date_breaks("2 years"), labels = date_format("%Y")) +
labs(x = "Date of Crime", y = "# of Crimes", title = "Daily Crimes in DC from 2008 – 2016")
plot <- ggplot(df_daily, aes(x = REPORT_DAT, y = count)) +
geom_line(color = "#F2CA27", size = 0.1) +
geom_smooth(color = "#1A1A1A") +
scale_x_date(breaks = date_breaks("2 years"), labels = date_format("%Y")) +
labs(x = "Date of Crime", y = "# of Crimes", title = "Daily Crimes in DC from 2008 – 2016")
?scale_x_date
plot <- ggplot(df_daily, aes(x = REPORT_DAT, y = count)) +
geom_line(color = "#F2CA27", size = 0.1) +
geom_smooth(color = "#1A1A1A") +
scale_x_date(date_breaks="2 years", labels = date_format("%Y")) +
labs(x = "Date of Crime", y = "# of Crimes", title = "Daily Crimes in DC from 2008 – 2016")
plot <- ggplot(df_daily, aes(x = REPORT_DAT, y = count)) +
geom_line(color = "#F2CA27", size = 0.1) +
geom_smooth(color = "#1A1A1A") +
scale_x_date(date_breaks="2 years", labels = date_labels("%Y")) +
labs(x = "Date of Crime", y = "# of Crimes", title = "Daily Crimes in DC from 2008 – 2016")
plot <- ggplot(df_daily, aes(x = REPORT_DAT, y = count)) +
geom_line(color = "#F2CA27", size = 0.1) +
geom_smooth(color = "#1A1A1A") +
scale_x_date(date_breaks="2 years", date_labels = ("%Y")) +
labs(x = "Date of Crime", y = "# of Crimes", title = "Daily Crimes in DC from 2008 – 2016")
ggplot(df_daily, aes(x = REPORT_DAT, y = count)) +
geom_line(color = "#F2CA27", size = 0.1) +
geom_smooth(color = "#1A1A1A") +
scale_x_date(date_breaks="2 years", date_labels = ("%Y")) +
labs(x = "Date of Crime", y = "# of Crimes", title = "Daily Crimes in DC from 2008 – 2016")
setwd("C:/Users/smcnish/Documents/Vizs/Crime/DC-Crime/raw data/")
library(ggplot2)
library(plyr)
library(dplyr)
#append all 8 files together
file_list <- list.files()
for (file in file_list){
# if the merged dataset doesn't exist, create it
if (!exists("dataset")){
dataset <- read.csv(file, header=TRUE)
}
# if the merged dataset does exist, append to it
if (exists("dataset")){
temp_dataset <-read.csv(file, header=TRUE)
dataset<-rbind(dataset, temp_dataset)
rm(temp_dataset)
}
}
setwd("C:/Users/smcnish/Documents/Vizs/Crime/DC-Crime/raw data/")
library(ggplot2)
library(plyr)
library(dplyr)
#append all 8 files together
file_list <- list.files()
for (file in file_list){
# if the merged dataset doesn't exist, create it
if (!exists("dataset")){
dataset <- read.csv(file, header=TRUE)
}
# if the merged dataset does exist, append to it
if (exists("dataset")){
temp_dataset <-read.csv(file, header=TRUE)
dataset<-rbind(dataset, temp_dataset)
rm(temp_dataset)
}
}
setwd("C:/Users/smcnish/Documents/Vizs/Crime/DC-Crime/raw data/")
library(ggplot2)
library(plyr)
library(dplyr)
#append all 8 files together
file_list <- list.files()
for (file in file_list){
# if the merged dataset doesn't exist, create it
if (!exists("dataset")){
dataset <- read.csv(file, header=TRUE)
}
# if the merged dataset does exist, append to it
if (exists("dataset")){
temp_dataset <-read.csv(file, header=TRUE)
dataset<-rbind(dataset, temp_dataset)
rm(temp_dataset)
}
}
dataset$time <- strptime(dataset$time, format = "%m/%d/%Y %I:%M:%S %p")
#clean up variables
dataset$time <- strptime(dataset$REPORT_DAT, format = "%m/%d/%Y %I:%M:%S %p")
dataset$time <- as.POSIXct(dataset$REPORT_DAT, format = "%m/%d/%Y %I:%M:%S %p")
#clean up variables
dataset$time <- sub(".* ", "", dataset$REPORT_DAT)
x <- sub(".* ", "", dataset$REPORT_DAT)
x <- sub(".*:space:", "", dataset$REPORT_DAT)
#clean up variables
x <- sub(".* ", "", dataset$REPORT_DAT)
?sapply
x <- sapply(strsplit(dataset$REPORT_DAT, " "), "[", 2)
#clean up variables
x <- sapply(strsplit(dataset$REPORT_DAT, ":space:"), "[", 2)
?gsub
x = sub(".*:", "", dataset$REPORT_DAT)
x = sub(".* {2}", "", dataset$REPORT_DAT)
x = sub(".* ", "", dataset$REPORT_DAT)
x = format(as.POSIXct(dataset$REPORT_DAT, format = "%m/%d/%Y %I:%M:%S %p"),"%H")
setwd("C:/Users/smcnish/Documents/Vizs/Crime/DC-Crime/raw data/")
library(ggplot2)
library(plyr)
library(dplyr)
#append all 8 files together
file_list <- list.files()
for (file in file_list){
# if the merged dataset doesn't exist, create it
if (!exists("dataset")){
dataset <- read.csv(file, header=TRUE)
}
# if the merged dataset does exist, append to it
if (exists("dataset")){
temp_dataset <-read.csv(file, header=TRUE)
dataset<-rbind(dataset, temp_dataset)
rm(temp_dataset)
}
}
#clean up variables
dataset$hour = format(as.POSIXct(dataset$REPORT_DAT, format = "%m/%d/%Y %I:%M:%S %p"),"%H")
dataset$REPORT_DAT<- as.Date(dataset$REPORT_DAT, format = "%m/%d/%Y %I:%M:%S %p")
dataset$day <- dataset$REPORT_DAT$mday        # day of month
dataset$month <- as.factor(dataset$REPORT_DAT$mon+1)     # month of year (zero-indexed)
dataset$year <- as.factor(dataset$REPORT_DAT$year+1900)  # years since 1900
dataset$START_DATE<- as.Date(dataset$START_DATE, format = "%m/%d/%Y %I:%M:%S %p")
dataset$END_DATE<- as.Date(dataset$END_DATE, format = "%m/%d/%Y %I:%M:%S %p")
#filter out 2017
dataset<-dataset[dataset$year != '2017',]
#Create dataset of crime by day
df_daily <- dataset %>%
group_by(REPORT_DAT) %>%
summarize(count = n()) %>%
arrange(REPORT_DAT)
#Plot crime by day
ggplot(df_daily, aes(x = REPORT_DAT, y = count)) +
geom_line(color = "#F2CA27", size = 0.1) +
geom_smooth(color = "#1A1A1A") +
scale_x_date(date_breaks="2 years", date_labels = ("%Y")) +
labs(x = "Date of Crime", y = "# of Crimes", title = "Daily Crimes in DC from 2008 – 2016")
setwd("C:/Users/smcnish/Documents/Vizs/Crime/DC-Crime/raw data/")
library(ggplot2)
library(plyr)
library(dplyr)
#append all 8 files together
file_list <- list.files()
for (file in file_list){
# if the merged dataset doesn't exist, create it
if (!exists("dataset")){
dataset <- read.csv(file, header=TRUE)
}
# if the merged dataset does exist, append to it
if (exists("dataset")){
temp_dataset <-read.csv(file, header=TRUE)
dataset<-rbind(dataset, temp_dataset)
rm(temp_dataset)
}
}
#clean up variables
dataset$hour = format(as.POSIXct(dataset$REPORT_DAT, format = "%m/%d/%Y %I:%M:%S %p"),"%H")
dataset$REPORT_DAT<- as.Date(dataset$REPORT_DAT, format = "%m/%d/%Y %I:%M:%S %p")
dataset$day <- dataset$REPORT_DAT$mday        # day of month
dataset$month <- as.factor(dataset$REPORT_DAT$mon+1)     # month of year (zero-indexed)
dataset$year <- as.factor(dataset$REPORT_DAT$year+1900)  # years since 1900
dataset$START_DATE<- as.Date(dataset$START_DATE, format = "%m/%d/%Y %I:%M:%S %p")
dataset$END_DATE<- as.Date(dataset$END_DATE, format = "%m/%d/%Y %I:%M:%S %p")
setwd("C:/Users/smcnish/Documents/Vizs/Crime/DC-Crime/raw data/")
library(ggplot2)
library(plyr)
library(dplyr)
#append all 8 files together
file_list <- list.files()
for (file in file_list){
# if the merged dataset doesn't exist, create it
if (!exists("dataset")){
dataset <- read.csv(file, header=TRUE)
}
# if the merged dataset does exist, append to it
if (exists("dataset")){
temp_dataset <-read.csv(file, header=TRUE)
dataset<-rbind(dataset, temp_dataset)
rm(temp_dataset)
}
}
#clean up variables
dataset$hour = format(as.POSIXct(dataset$REPORT_DAT, format = "%m/%d/%Y %I:%M:%S %p"),"%H")
dataset$day <- dataset$REPORT_DAT$mday        # day of month
dataset$month <- as.factor(dataset$REPORT_DAT$mon+1)     # month of year (zero-indexed)
dataset$year <- as.factor(dataset$REPORT_DAT$year+1900)  # years since 1900
dataset$START_DATE<- as.Date(dataset$START_DATE, format = "%m/%d/%Y %I:%M:%S %p")
dataset$END_DATE<- as.Date(dataset$END_DATE, format = "%m/%d/%Y %I:%M:%S %p")
dataset$REPORT_DAT<- as.Date(dataset$REPORT_DAT, format = "%m/%d/%Y %I:%M:%S %p")
#filter out 2017
dataset$day <- format(as.Date(dataset$REPORT_DAT,format="%Y-%m-%d"), "%d")
#clean up variables
dataset$hour = format(as.POSIXct(dataset$REPORT_DAT, format = "%m/%d/%Y %I:%M:%S %p"),"%H")
dataset$day <- format(as.Date(dataset$REPORT_DAT,format="%Y-%m-%d"), "%d")        # day of month
dataset$month <- format(as.Date(dataset$REPORT_DAT,format="%Y-%m-%d"), "%m")      # month of year
dataset$year <- format(as.Date(dataset$REPORT_DAT,format="%Y-%m-%d"), "%y")   # year
dataset$START_DATE<- as.Date(dataset$START_DATE, format = "%m/%d/%Y %I:%M:%S %p")
dataset$END_DATE<- as.Date(dataset$END_DATE, format = "%m/%d/%Y %I:%M:%S %p")
dataset$REPORT_DAT<- as.Date(dataset$REPORT_DAT, format = "%m/%d/%Y %I:%M:%S %p")
dataset$month <- format(as.Date(dataset$REPORT_DAT,format="%Y-%m-%d"), "%m")      # month of year
dataset$year <- format(as.Date(dataset$REPORT_DAT,format="%Y-%m-%d"), "%yyyy")   # year
dataset$month <- format(as.Date(dataset$REPORT_DAT,format="%Y-%m-%d"), "%m")      # month of year
dataset$year <- format(as.Date(dataset$REPORT_DAT,format="%Y-%m-%d"), "%y")   # year
#filter out 2017
dataset<-dataset[dataset$year != '17',]
#Create dataset of crime by day
df_daily <- dataset %>%
group_by(REPORT_DAT) %>%
summarize(count = n()) %>%
arrange(REPORT_DAT)
#Plot crime by day
ggplot(df_daily, aes(x = REPORT_DAT, y = count)) +
geom_line(color = "#F2CA27", size = 0.1) +
geom_smooth(color = "#1A1A1A") +
scale_x_date(date_breaks="2 years", date_labels = ("%Y")) +
labs(x = "Date of Crime", y = "# of Crimes", title = "Daily Crimes in DC from 2008 – 2016")
dataset$DayofWeek <- weekdays(dataset$REPORT_DAT)
df_time <- dataset %>%
group_by(DayofWeek, hour) %>%
summarize(count = n())
head(df_time)
df_time
setwd("C:/Users/smcnish/Documents/Vizs/Crime/DC-Crime/raw data/")
library(ggplot2)
library(plyr)
library(dplyr)
#append all 8 files together
file_list <- list.files()
for (file in file_list){
# if the merged dataset doesn't exist, create it
if (!exists("dataset")){
dataset <- read.csv(file, header=TRUE)
}
# if the merged dataset does exist, append to it
if (exists("dataset")){
temp_dataset <-read.csv(file, header=TRUE)
dataset<-rbind(dataset, temp_dataset)
rm(temp_dataset)
}
}
#clean up variables
dataset$hour = format(as.POSIXct(dataset$REPORT_DAT, format = "%m/%d/%Y %I:%M:%S %p"),"%H")
dataset$day <- format(as.Date(dataset$REPORT_DAT,format="%Y-%m-%d"), "%d")        # day of month
dataset$month <- format(as.Date(dataset$REPORT_DAT,format="%Y-%m-%d"), "%m")      # month of year
dataset$year <- format(as.Date(dataset$REPORT_DAT,format="%Y-%m-%d"), "%y")   # year
dataset$START_DATE<- as.Date(dataset$START_DATE, format = "%m/%d/%Y %I:%M:%S %p")
dataset$END_DATE<- as.Date(dataset$END_DATE, format = "%m/%d/%Y %I:%M:%S %p")
dataset$date<- as.Date(dataset$REPORT_DAT, format = "%m/%d/%Y %I:%M:%S %p")
dataset$DayofWeek <- weekdays(dataset$REPORT_DAT)
dataset$hour = format(as.POSIXct(dataset$REPORT_DAT, format = "%m/%d/%Y %I:%M:%S %p"),"%I")
dataset$DayofWeek <- weekdays(dataset$date)
#summarize crime by day of the week and hour
df_time <- dataset %>%
group_by(DayofWeek, hour) %>%
summarize(count = n())
df_time
tail(df_time)
dataset$hour = format(as.POSIXct(dataset$REPORT_DAT, format = "%m/%d/%Y %I:%M:%S %p"),"%I")
head(dataset)
dataset$day <- format(as.Date(dataset$REPORT_DAT,format="%Y-%m-%d"), "%d")        # day of month
#clean up variables
dataset$hour = format(as.POSIXct(dataset$REPORT_DAT, format = "%m/%d/%Y %I:%M:%S %p"),"%I")
dataset$day <- format(as.Date(dataset$REPORT_DAT,format="%Y-%m-%d %I:%M:%S %p"), "%d")        # day of month
dataset$month <- format(as.Date(dataset$REPORT_DAT,format="%Y-%m-%d %I:%M:%S %p"), "%m")      # month of year
dataset$year <- format(as.Date(dataset$REPORT_DAT,format="%Y-%m-%d %I:%M:%S %p"), "%y")   # year
